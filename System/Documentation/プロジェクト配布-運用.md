# プロジェクト配布（release）運用

対象: `/Users/donaichu/Workspaces/projects/*`

## 方針（固定）

- 配布は **`release/` に集約**（他フォルダは原則「開発用」）
- **サンプルは作らない / 同梱しない / zipに入れない**
- 配布物は **zip を作る**（渡す単位を1つにする）
- 正本（編集対象）は **`src/` に置く**（`release/` はGit管理しない）

## `release/` の役割

- `release/README-配布手順.md`: 受け手向けの最短手順（必須）
- `release/app/`: 単体HTMLやスクリプト等、「そのまま渡せる」もの
- `release/web/`: フロントエンドのビルド成果物（静的ホスティング向け）
- `release/*.zip`: 実際に渡すzip（Gitには入れない前提）

※ `dist/` はビルドで自動生成される中間物なので、運用上は `release/` を正にする。

## 最小フォルダ構成（推奨）

迷いを減らすため、デフォルトは最小に寄せる。

- `src/`（正本。編集対象）
- `release/`（配布物。原則Git管理しない）
- `docs/`（必要な時だけ）
- `tmp/`（捨てていい作業用。必要な時だけ）

## zip 作成（自動）

SecondBrain 側のスクリプトで、各プロジェクトの `release/` からzipを生成する。

```bash
# 全プロジェクト（releaseがあるもの）をzip化
System/Scripts/project-release.sh --all --zip

# 特定プロジェクトだけ
System/Scripts/project-release.sh --project "債権管理_v2" --zip
System/Scripts/project-release.sh --project "emax-practice-game" --zip
```

### zip の中身

- 原則: `release/README-配布手順.md` + `release/app/` または `release/web/`
- サンプル（`samples/` 等）は **入れない**

## 新規プロジェクト作成時（自動）

まずは `release/` を正として作る（配布手順ファイルを先に置く）。

```bash
System/Scripts/project-scaffold.sh --name "プロジェクト名" --type static-html
System/Scripts/project-scaffold.sh --name "プロジェクト名" --type vite-web
System/Scripts/project-scaffold.sh --name "プロジェクト名" --type python-streamlit
```

## 既存プロジェクトの正規化（自動）

「ルートに置いてある単体HTML/スクリプト」などを `src/` に寄せ、`release/` を整える。

```bash
System/Scripts/project-normalize.sh --project "CSVコンバートWEBアプリ"
System/Scripts/project-normalize.sh --project "債権管理_v2"
System/Scripts/project-normalize.sh --all
```

## 入口の分担（Hooks / Commands / Skills / Scripts）

目的: **どのツール入口（Cursor / Claude / Codex）からでも同じ結果**にする。

- **Scripts（SSOT）**: 仕様と処理の正本。ここだけ直せば全入口に反映できる。
  - 作成: `System/Scripts/dev-init.sh` / `System/Scripts/project-scaffold.sh`
  - 配布(zip): `System/Scripts/project-release.sh`
- **Commands / Skills（明示的な入口）**: ユーザーが「作成する/配布する」と意図した時に呼ぶ薄いラッパー。
  - 入口はスクリプトを呼ぶだけ（ロジックを重複させない）
- **Hooks（自動発火）**: “便利”より **事故防止/統一チェック** 向き。
  - 原則: 勝手にフォルダ作成や移動はしない（意図しない変更になりやすい）
  - やるなら: リマインド・警告・整合チェック（例: `release/README-配布手順.md` の未整備を警告、zipがGit追跡されていないか警告）

## Skill への組み込み（方針）

- 「プロジェクト作成 skill」からは、この運用に従って **`project-scaffold.sh` を呼ぶ**
- 「配布（zip化）」は `project-release.sh --zip` を呼ぶ

注意: Skill 本体の編集は原則 `System/Skills/`（原本リポジトリ）側で行い、同期スクリプトで反映する（コピー側を直接編集しない）。
